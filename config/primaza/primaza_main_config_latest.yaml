apiVersion: v1
kind: Namespace
metadata:
  labels:
    app.kubernetes.io/component: manager
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: system
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: namespace
    app.kubernetes.io/part-of: primaza
    control-plane: controller-manager
  name: primaza-system
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: clusterenvironments.primaza.io
spec:
  group: primaza.io
  names:
    kind: ClusterEnvironment
    listKind: ClusterEnvironmentList
    plural: clusterenvironments
    singular: clusterenvironment
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: the environment associated to the ClusterEnvironment instance
      jsonPath: .spec.environmentName
      name: Environment
      type: string
    - description: the state of the ClusterEnvironment
      jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ClusterEnvironment is the Schema for the clusterenvironments
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ClusterEnvironmentSpec defines the desired state of ClusterEnvironment
            properties:
              applicationNamespaces:
                description: Namespaces in target cluster where applications are deployed
                items:
                  type: string
                type: array
              clusterContextSecret:
                description: Name of the Secret where connection (kubeconfig) information
                  to target cluster is stored
                type: string
              contactInfo:
                description: Cluster Admin's contact information
                type: string
              description:
                description: Description of the ClusterEnvironment
                type: string
              environmentName:
                description: The environment associated to the ClusterEnvironment
                  instance
                type: string
              labels:
                description: Labels
                items:
                  type: string
                type: array
              serviceNamespaces:
                description: Namespaces in target cluster where services are discovered
                items:
                  type: string
                type: array
              synchronizationStrategy:
                default: Push
                description: SynchronizationStrategy defines whether Primaza will
                  watch clusters (Pull) or Agents will Push data as they have (Push)
                enum:
                - Pull
                - Push
                type: string
            required:
            - clusterContextSecret
            - environmentName
            - synchronizationStrategy
            type: object
          status:
            description: ClusterEnvironmentStatus defines the observed state of ClusterEnvironment
            properties:
              conditions:
                description: Status Conditions
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              state:
                default: Offline
                description: The State of the cluster environment
                enum:
                - Online
                - Offline
                - Partial
                type: string
            required:
            - conditions
            - state
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: registeredservices.primaza.io
spec:
  group: primaza.io
  names:
    kind: RegisteredService
    listKind: RegisteredServiceList
    plural: registeredservices
    singular: registeredservice
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: the state of the RegisteredService
      jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: RegisteredService is the Schema for the registeredservices API.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: RegisteredServiceSpec defines the desired state of RegisteredService
            properties:
              constraints:
                description: Constraints defines under which circumstances the RegisteredService
                  may be used.
                properties:
                  environments:
                    description: Environments defines in which environments the RegisteredService
                      may be used.
                    items:
                      type: string
                    type: array
                type: object
              healthcheck:
                description: HealthCheck defines a health check for the underlying
                  service.
                properties:
                  container:
                    description: Container defines a container that will run a check
                      against the ServiceEndpointDefinition to determine connectivity
                      and access.
                    properties:
                      command:
                        description: Command to execute in the container to run the
                          test
                        type: string
                      image:
                        description: Container image with the client to run the test
                        type: string
                    required:
                    - command
                    - image
                    type: object
                required:
                - container
                type: object
              serviceClassIdentity:
                description: ServiceClassIdentity defines a set of attributes that
                  are sufficient to identify a service class.  A ServiceClaim whose
                  ServiceClassIdentity field is a subset of a RegisteredService's
                  keys can claim that service.
                items:
                  description: ServiceClassIdentityItem defines an attribute that
                    is necessary to identify a service class.
                  properties:
                    name:
                      description: Name of the service class identity attribute.
                      type: string
                    value:
                      description: Value of the service class identity attribute.
                      type: string
                  required:
                  - name
                  - value
                  type: object
                type: array
              serviceEndpointDefinition:
                description: ServiceEndpointDefinition defines a set of attributes
                  sufficient for a client to establish a connection to the service.
                items:
                  description: ServiceEndpointDefinitionItem defines an attribute
                    that is necessary for a client to connect to a service
                  properties:
                    name:
                      description: Name of the service endpoint definition attribute.
                      type: string
                    value:
                      description: Value of the service endpoint definition attribute.
                        It is mutually exclusive with ValueFromSecret.
                      type: string
                    valueFromSecret:
                      description: Value reference of the service endpoint definition
                        attribute. It is mutually exclusive with Value
                      properties:
                        key:
                          description: Key of the secret reference field
                          type: string
                        name:
                          description: Name of the secret reference
                          type: string
                      required:
                      - key
                      - name
                      type: object
                  required:
                  - name
                  type: object
                type: array
              sla:
                description: SLA defines the support level for this service.
                type: string
            required:
            - serviceClassIdentity
            - serviceEndpointDefinition
            type: object
          status:
            description: RegisteredServiceStatus defines the observed state of RegisteredService.
            properties:
              state:
                description: State describes the current state of the service.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: servicebindings.primaza.io
spec:
  group: primaza.io
  names:
    kind: ServiceBinding
    listKind: ServiceBindingList
    plural: servicebindings
    singular: servicebinding
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: the state of the ServiceBinding
      jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceBinding is the Schema for the servicebindings API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServiceBindingSpec defines the desired state of ServiceBinding
            properties:
              application:
                description: 'Application resource to inject the binding info. It
                  could be any process running within a container. From the spec:
                  A Service Binding resource **MUST** define a `.spec.application`
                  which is an `ObjectReference`-like declaration to a `PodSpec`-able
                  resource.  A `ServiceBinding` **MAY** define the application reference
                  by-name or by-[label selector][ls]. A name and selector **MUST NOT**
                  be defined in the same reference.'
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  kind:
                    description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                    type: string
                  selector:
                    description: Selector is a query that selects the workload or
                      workloads to bind the service to
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: A label selector requirement is a selector
                            that contains values, a key, and an operator that relates
                            the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: operator represents a key's relationship
                                to a set of values. Valid operators are In, NotIn,
                                Exists and DoesNotExist.
                              type: string
                            values:
                              description: values is an array of string values. If
                                the operator is In or NotIn, the values array must
                                be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced
                                during a strategic merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: matchLabels is a map of {key,value} pairs. A
                          single {key,value} in the matchLabels map is equivalent
                          to an element of matchExpressions, whose key field is "key",
                          the operator is "In", and the values array contains only
                          "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - apiVersion
                - kind
                type: object
              env:
                description: Env creates environment variables based on the Secret
                  values
                items:
                  description: Environment represents a key to Secret data keys and
                    name of the environment variable
                  properties:
                    key:
                      description: Secret data key
                      type: string
                    name:
                      description: Name of the environment variable
                      type: string
                  required:
                  - key
                  - name
                  type: object
                type: array
              serviceEndpointDefinitionSecret:
                description: ServiceEndpointDefinitionSecret is the name of the secret
                  to project into the application
                type: string
            required:
            - application
            - serviceEndpointDefinitionSecret
            type: object
          status:
            description: Observed status of the service binding within the namespace
            properties:
              conditions:
                description: The status of the service binding along with reason and
                  type
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              state:
                default: Malformed
                description: The state of the service binding observed
                enum:
                - Ready
                - Malformed
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: servicecatalogs.primaza.io
spec:
  group: primaza.io
  names:
    kind: ServiceCatalog
    listKind: ServiceCatalogList
    plural: servicecatalogs
    singular: servicecatalog
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceCatalog is the Schema for the servicecatalogs API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServiceCatalogSpec defines the desired state of ServiceCatalog
            properties:
              services:
                description: Services contains a list of services that are known to
                  Primaza.
                items:
                  properties:
                    name:
                      description: Name defines the name of the known service
                      type: string
                    serviceClassIdentity:
                      description: ServiceClassIdentity defines a set of attributes
                        that are sufficient to identify a service class.  A ServiceClaim
                        whose ServiceClassIdentity field is a subset of a RegisteredService's
                        keys can claim that service.
                      items:
                        description: ServiceClassIdentityItem defines an attribute
                          that is necessary to identify a service class.
                        properties:
                          name:
                            description: Name of the service class identity attribute.
                            type: string
                          value:
                            description: Value of the service class identity attribute.
                            type: string
                        required:
                        - name
                        - value
                        type: object
                      type: array
                    serviceEndpointDefinitionKeys:
                      description: ServiceEndpointDefinitionKeys defines a set of
                        keys listing the information this service provides to a workload.
                      items:
                        type: string
                      type: array
                  required:
                  - name
                  - serviceClassIdentity
                  - serviceEndpointDefinitionKeys
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: serviceclaims.primaza.io
spec:
  group: primaza.io
  names:
    kind: ServiceClaim
    listKind: ServiceClaimList
    plural: serviceclaims
    singular: serviceclaim
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: the state of the ServiceClaim
      jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceClaim is the Schema for the serviceclaims API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServiceClaimSpec defines the desired state of ServiceClaim
            properties:
              application:
                description: Application resource to inject the binding info. It could
                  be any process running within a container.
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  kind:
                    description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                    type: string
                  selector:
                    description: Selector is a query that selects the workload or
                      workloads to bind the service to
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: A label selector requirement is a selector
                            that contains values, a key, and an operator that relates
                            the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: operator represents a key's relationship
                                to a set of values. Valid operators are In, NotIn,
                                Exists and DoesNotExist.
                              type: string
                            values:
                              description: values is an array of string values. If
                                the operator is In or NotIn, the values array must
                                be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced
                                during a strategic merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: matchLabels is a map of {key,value} pairs. A
                          single {key,value} in the matchLabels map is equivalent
                          to an element of matchExpressions, whose key field is "key",
                          the operator is "In", and the values array contains only
                          "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - apiVersion
                - kind
                type: object
              applicationClusterContext:
                properties:
                  clusterEnvironmentName:
                    type: string
                  namespace:
                    type: string
                required:
                - clusterEnvironmentName
                - namespace
                type: object
              environmentTag:
                description: EnvironmentTag allows the controller to search for those
                  application cluster environments that define such EnvironmentTag
                type: string
              serviceClassIdentity:
                description: ServiceClassIdentity defines a set of attributes that
                  are sufficient to identify a service class.  A ServiceClaim whose
                  ServiceClassIdentity field is a subset of a RegisteredService's
                  keys can claim that service.
                items:
                  description: ServiceClassIdentityItem defines an attribute that
                    is necessary to identify a service class.
                  properties:
                    name:
                      description: Name of the service class identity attribute.
                      type: string
                    value:
                      description: Value of the service class identity attribute.
                      type: string
                  required:
                  - name
                  - value
                  type: object
                type: array
              serviceEndpointDefinitionKeys:
                description: ServiceEndpointDefinition defines a set of attributes
                  sufficient for a client to establish a connection to the service.
                items:
                  type: string
                type: array
            required:
            - serviceClassIdentity
            - serviceEndpointDefinitionKeys
            type: object
          status:
            description: ServiceClaimStatus defines the observed state of ServiceClaim
            properties:
              claimID:
                type: string
              conditions:
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              registeredService:
                type: string
              state:
                default: Pending
                enum:
                - Pending
                - Resolved
                - Invalid
                type: string
            required:
            - registeredService
            - state
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: serviceclasses.primaza.io
spec:
  group: primaza.io
  names:
    kind: ServiceClass
    listKind: ServiceClassList
    plural: serviceclasses
    singular: serviceclass
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceClass is the Schema for the serviceclasses API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServiceClassSpec defines the desired state of ServiceClass
            properties:
              constraints:
                description: Constraints defines under which circumstances the ServiceClass
                  may be used.
                properties:
                  environments:
                    description: Environments defines the environments that the RegisteredService
                      may be used in.
                    items:
                      type: string
                    type: array
                type: object
              healthCheck:
                description: HealthCheck sets the default health check for generated
                  registered services
                properties:
                  container:
                    description: Container defines a container that will run a check
                      against the ServiceEndpointDefinition to determine connectivity
                      and access.
                    properties:
                      command:
                        description: Command to execute in the container to run the
                          test
                        type: string
                      image:
                        description: Container image with the client to run the test
                        type: string
                    required:
                    - command
                    - image
                    type: object
                required:
                - container
                type: object
              resource:
                description: Resource defines the resource type to be used to convert
                  into Registered Services
                properties:
                  apiVersion:
                    description: APIVersion of the underlying service resource
                    type: string
                  kind:
                    description: Kind of the underlying service resource
                    type: string
                  serviceEndpointDefinitionMappings:
                    description: ServiceEndpointDefinitionMappings defines how a key-value
                      mapping projected into services may be constructed.
                    properties:
                      resourceFields:
                        items:
                          properties:
                            jsonPath:
                              description: JsonPath defines where data lives in the
                                service resource.  This query must resolve to a single
                                value (e.g. not an array of values).
                              type: string
                            name:
                              description: Name of the data referred to
                              type: string
                            secret:
                              default: true
                              description: Secret indicates whether or not the mapping
                                data needs to be stored in a secret.
                              type: boolean
                          required:
                          - jsonPath
                          - name
                          type: object
                        type: array
                      secretRefFields:
                        items:
                          properties:
                            name:
                              description: Name of the data referred to
                              type: string
                            secretKey:
                              description: SecretKey defines a constant value or a
                                JsonPath used to extract from resource's specification
                                the Key to be copied from the linked secret
                              maxProperties: 1
                              minProperties: 1
                              properties:
                                constant:
                                  description: Constant is a constant value for the
                                    field
                                  type: string
                                jsonPath:
                                  description: JsonPathExpr represents a jsonPath
                                    for extracting the field
                                  type: string
                              type: object
                            secretName:
                              description: SecretName defines a constant value or
                                a JsonPath used to extract from resource's specification
                                the name of a linked secret
                              maxProperties: 1
                              minProperties: 1
                              properties:
                                constant:
                                  description: Constant is a constant value for the
                                    field
                                  type: string
                                jsonPath:
                                  description: JsonPathExpr represents a jsonPath
                                    for extracting the field
                                  type: string
                              type: object
                          required:
                          - name
                          - secretKey
                          - secretName
                          type: object
                        type: array
                    type: object
                required:
                - apiVersion
                - kind
                - serviceEndpointDefinitionMappings
                type: object
              serviceClassIdentity:
                description: ServiceClassIdentity defines a set of attributes that
                  are sufficient to identify a service class.  A ServiceClaim whose
                  ServiceClassIdentity field is a subset of a RegisteredService's
                  keys can claim that service.
                items:
                  description: ServiceClassIdentityItem defines an attribute that
                    is necessary to identify a service class.
                  properties:
                    name:
                      description: Name of the service class identity attribute.
                      type: string
                    value:
                      description: Value of the service class identity attribute.
                      type: string
                  required:
                  - name
                  - value
                  type: object
                type: array
            required:
            - resource
            - serviceClassIdentity
            type: object
          status:
            description: ServiceClassStatus defines the observed state of ServiceClass
            properties:
              conditions:
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: controller-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: serviceaccount
    app.kubernetes.io/part-of: primaza
  name: primaza-controller-manager
  namespace: primaza-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: application-agent-role
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: clusterrole
    app.kubernetes.io/part-of: primaza
  name: primaza-claimer
  namespace: primaza-system
rules:
- apiGroups:
  - primaza.io
  resources:
  - serviceclaims
  verbs:
  - get
  - list
  - create
  - delete
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: leader-election-role
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: role
    app.kubernetes.io/part-of: primaza
  name: primaza-leader-election-role
  namespace: primaza-system
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  creationTimestamp: null
  name: primaza-manager-role
  namespace: primaza-system
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - get
  - list
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - clusterenvironments
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - clusterenvironments/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io
  resources:
  - clusterenvironments/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - primaza.io
  resources:
  - registeredservices
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - registeredservices/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io
  resources:
  - registeredservices/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - primaza.io
  resources:
  - servicecatalogs
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - servicecatalogs/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io
  resources:
  - servicecatalogs/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - primaza.io
  resources:
  - serviceclaims
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - serviceclaims/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io
  resources:
  - serviceclaims/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - primaza.io
  resources:
  - serviceclasses
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io
  resources:
  - serviceclasses/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io
  resources:
  - serviceclasses/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - primaza.io.primaza.io
  resources:
  - servicecatalogs
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - primaza.io.primaza.io
  resources:
  - servicecatalogs/finalizers
  verbs:
  - update
- apiGroups:
  - primaza.io.primaza.io
  resources:
  - servicecatalogs/status
  verbs:
  - get
  - patch
  - update
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - rolebindings
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: service-agent-role
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: clusterrole
    app.kubernetes.io/part-of: primaza
  name: primaza-reporter
  namespace: primaza-system
rules:
- apiGroups:
  - primaza.io
  resources:
  - registeredservices
  verbs:
  - get
  - create
  - delete
  - patch
  - update
- apiGroups:
  - primaza.io
  resources:
  - registeredservices/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - get
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: leader-election-rolebinding
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: rolebinding
    app.kubernetes.io/part-of: primaza
  name: primaza-leader-election-rolebinding
  namespace: primaza-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: primaza-leader-election-role
subjects:
- kind: ServiceAccount
  name: primaza-controller-manager
  namespace: primaza-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/component: rbac
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: manager-rolebinding
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: clusterrolebinding
    app.kubernetes.io/part-of: primaza
  name: primaza-manager-rolebinding
  namespace: primaza-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: primaza-manager-role
subjects:
- kind: ServiceAccount
  name: primaza-controller-manager
  namespace: primaza-system
---
apiVersion: v1
data:
  agentapp-config-manifest: |
    apiVersion: v1
    data:
      synchronization-strategy: Push
    kind: ConfigMap
    metadata:
      name: primaza-agentapp-config
      namespace: applications
  agentapp-image: ghcr.io/primaza/primaza-agentapp:latest
  agentapp-manifest: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      finalizers:
        - agentapp.primaza.io/finalizer
      labels:
        app.kubernetes.io/part-of: primaza
        control-plane: primaza-app-agent
      name: primaza-app-agent
      namespace: applications
    spec:
      replicas: 1
      selector:
        matchLabels:
          control-plane: primaza-app-agent
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/default-container: manager
          labels:
            control-plane: primaza-app-agent
        spec:
          containers:
            - args:
                - --leader-elect
              command:
                - /manager
              env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: SYNCHRONIZATION_STRATEGY
                  valueFrom:
                    configMapKeyRef:
                      key: synchronization-strategy
                      name: primaza-agentapp-config
              image: agentapp:latest
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /healthz
                  port: 8081
                initialDelaySeconds: 15
                periodSeconds: 20
              name: manager
              readinessProbe:
                httpGet:
                  path: /readyz
                  port: 8081
                initialDelaySeconds: 5
                periodSeconds: 10
              resources:
                limits:
                  cpu: 500m
                  memory: 128Mi
                requests:
                  cpu: 10m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
              volumeMounts:
                - mountPath: /etc/primaza
                  name: primaza-secret-volume
                  readOnly: true
          securityContext:
            runAsNonRoot: true
          serviceAccountName: primaza-app-agent
          terminationGracePeriodSeconds: 10
          volumes:
            - name: primaza-secret-volume
              secret:
                defaultMode: 420
                secretName: primaza-app-kubeconfig
  agentsvc-config-manifest: |
    apiVersion: v1
    data:
      synchronization-strategy: Push
    kind: ConfigMap
    metadata:
      name: primaza-agentsvc-config
      namespace: services
  agentsvc-image: ghcr.io/primaza/primaza-agentsvc:latest
  agentsvc-manifest: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      finalizers:
        - agent.primaza.io/finalizer
      labels:
        app.kubernetes.io/part-of: primaza
        control-plane: primaza-svc-agent
      name: primaza-svc-agent
      namespace: services
    spec:
      replicas: 1
      selector:
        matchLabels:
          control-plane: primaza-svc-agent
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/default-container: manager
          labels:
            control-plane: primaza-svc-agent
        spec:
          containers:
            - args:
                - --leader-elect
              command:
                - /manager
              env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: SYNCHRONIZATION_STRATEGY
                  valueFrom:
                    configMapKeyRef:
                      key: synchronization-strategy
                      name: primaza-agentsvc-config
              image: agentsvc:latest
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /healthz
                  port: 8081
                initialDelaySeconds: 15
                periodSeconds: 20
              name: manager
              readinessProbe:
                httpGet:
                  path: /readyz
                  port: 8081
                initialDelaySeconds: 5
                periodSeconds: 10
              resources:
                limits:
                  cpu: 500m
                  memory: 128Mi
                requests:
                  cpu: 10m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
              volumeMounts:
                - mountPath: /tmp/k8s-webhook-server/serving-certs
                  name: cert
                  readOnly: true
                - mountPath: /etc/primaza
                  name: primaza-secret-volume
                  readOnly: true
          securityContext:
            runAsNonRoot: true
          serviceAccountName: primaza-svc-agent
          terminationGracePeriodSeconds: 10
          volumes:
            - name: cert
              secret:
                defaultMode: 420
                secretName: webhook-server-cert
            - name: primaza-secret-volume
              secret:
                defaultMode: 420
                secretName: primaza-svc-kubeconfig
  health-check-interval: "600"
kind: ConfigMap
metadata:
  name: primaza-manager-config
  namespace: primaza-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/component: webhook
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: webhook-service
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: service
    app.kubernetes.io/part-of: primaza
  name: primaza-webhook-service
  namespace: primaza-system
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
  selector:
    control-plane: controller-manager
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/component: manager
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: controller-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: deployment
    app.kubernetes.io/part-of: primaza
    control-plane: controller-manager
  name: primaza-controller-manager
  namespace: primaza-system
spec:
  replicas: 1
  selector:
    matchLabels:
      control-plane: controller-manager
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: manager
      labels:
        control-plane: controller-manager
    spec:
      containers:
      - args:
        - --leader-elect
        command:
        - /manager
        env:
        - name: WATCH_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: AGENT_APP_IMAGE
          valueFrom:
            configMapKeyRef:
              key: agentapp-image
              name: primaza-manager-config
        - name: AGENT_APP_MANIFEST
          valueFrom:
            configMapKeyRef:
              key: agentapp-manifest
              name: primaza-manager-config
        - name: AGENT_APP_CONFIG_MANIFEST
          valueFrom:
            configMapKeyRef:
              key: agentapp-config-manifest
              name: primaza-manager-config
        - name: AGENT_SVC_IMAGE
          valueFrom:
            configMapKeyRef:
              key: agentsvc-image
              name: primaza-manager-config
        - name: AGENT_SVC_MANIFEST
          valueFrom:
            configMapKeyRef:
              key: agentsvc-manifest
              name: primaza-manager-config
        - name: AGENT_SVC_CONFIG_MANIFEST
          valueFrom:
            configMapKeyRef:
              key: agentsvc-config-manifest
              name: primaza-manager-config
        - name: HEALTH_CHECK_INTERVAL
          valueFrom:
            configMapKeyRef:
              key: health-check-interval
              name: primaza-manager-config
        image: ghcr.io/primaza/primaza:latest
        imagePullPolicy: IfNotPresent
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        name: manager
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            cpu: 500m
            memory: 128Mi
          requests:
            cpu: 10m
            memory: 64Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      securityContext:
        runAsNonRoot: true
      serviceAccountName: primaza-controller-manager
      terminationGracePeriodSeconds: 10
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: webhook-server-cert
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  labels:
    app.kubernetes.io/component: certificate
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: serving-cert
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: certificate
    app.kubernetes.io/part-of: primaza
  name: primaza-serving-cert
  namespace: primaza-system
spec:
  dnsNames:
  - primaza-webhook-service.primaza-system.svc
  - primaza-webhook-service.primaza-system.svc.cluster.local
  issuerRef:
    kind: Issuer
    name: primaza-selfsigned-issuer
  secretName: webhook-server-cert
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  labels:
    app.kubernetes.io/component: certificate
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: selfsigned-issuer
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: issuer
    app.kubernetes.io/part-of: primaza
  name: primaza-selfsigned-issuer
  namespace: primaza-system
spec:
  selfSigned: {}
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  annotations:
    cert-manager.io/inject-ca-from: primaza-system/primaza-serving-cert
  labels:
    app.kubernetes.io/component: webhook
    app.kubernetes.io/created-by: primaza
    app.kubernetes.io/instance: validating-webhook-configuration
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: validatingwebhookconfiguration
    app.kubernetes.io/part-of: primaza
  name: primaza-validating-webhook-configuration
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: primaza-webhook-service
      namespace: primaza-system
      path: /validate-primaza-io-v1alpha1-serviceclaim
  failurePolicy: Fail
  name: vserviceclaim.kb.io
  rules:
  - apiGroups:
    - primaza.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - serviceclaims
  sideEffects: None
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: primaza-webhook-service
      namespace: primaza-system
      path: /validate-primaza-io-v1alpha1-serviceclass
  failurePolicy: Fail
  name: vserviceclass.kb.io
  rules:
  - apiGroups:
    - primaza.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - serviceclasses
  sideEffects: None
